import { Badge, Box, DropdownMenu, Flex, Heading } from "@radix-ui/themes";
import { useContext } from "react";
import { Link } from "react-router-dom";
import { ChainContext } from "../context/ChainContext";
import { ConnectWalletMenu } from "./ConnectWalletMenu";
import { SignInMenu } from "./SignInMenu";

export function Nav() {
  const {
    displayName: currentChainName,
    chain,
    setChain,
  } = useContext(ChainContext);
  const currentChainBadge = (
    <Badge color="gray" style={{ verticalAlign: "middle" }}>
      {currentChainName}
    </Badge>
  );
  return (
    <Box
      style={{
        backgroundColor: "var(--gray-1)",
        borderBottom: "1px solid var(--gray-a4)",
        zIndex: 1,
        padding: "12px 24px",
      }}
      position="sticky"
      top="0"
    >
      <Flex gap="4" justify="between" align="center">
        <Flex align="center" gap="2">
          <svg
            width="80"
            height="80"
            viewBox="0 0 144 38"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style={{ marginRight: "12px" }}
          >
            <path
              d="M2.08 33V27L12.96 17.96V17.32H2.48V13.16H18.48V19.16L7.6 28.2V28.84H18.8V33H2.08Z"
              fill="url(#paint0_linear_24_602)"
            />
            <mask
              id="path-2-outside-1_24_602"
              maskUnits="userSpaceOnUse"
              x="25"
              y="4"
              width="118"
              height="31"
              fill="black"
            >
              <rect fill="white" x="25" y="4" width="118" height="31" />
              <path d="M26.64 33V5H44.24V9.8H31.92V16.56H43.28V21.36H31.92V33H26.64ZM55.7272 33.32C54.1805 33.32 52.8205 32.9733 51.6472 32.28C50.5005 31.56 49.6072 30.5733 48.9672 29.32C48.3272 28.0667 48.0072 26.6267 48.0072 25V13.16H53.0472V24.6C53.0472 26.0933 53.4072 27.2133 54.1272 27.96C54.8739 28.7067 55.9272 29.08 57.2872 29.08C58.8339 29.08 60.0339 28.5733 60.8872 27.56C61.7405 26.52 62.1672 25.08 62.1672 23.24V13.16H67.2072V33H62.2472V30.4H61.5272C61.2072 31.0667 60.6072 31.72 59.7272 32.36C58.8472 33 57.5139 33.32 55.7272 33.32ZM71.8556 33V28.36H75.5356V9.64H71.8556V5H86.2556C87.9623 5 89.4423 5.29333 90.6956 5.88C91.9756 6.44 92.9623 7.25333 93.6556 8.32C94.3756 9.36 94.7356 10.6133 94.7356 12.08V12.48C94.7356 13.76 94.4956 14.8133 94.0156 15.64C93.5356 16.44 92.9623 17.0667 92.2956 17.52C91.6556 17.9467 91.0423 18.2533 90.4556 18.44V19.16C91.0423 19.32 91.6823 19.6267 92.3756 20.08C93.069 20.5067 93.6556 21.1333 94.1356 21.96C94.6423 22.7867 94.8956 23.8667 94.8956 25.2V25.6C94.8956 27.1467 94.5356 28.48 93.8156 29.6C93.0956 30.6933 92.0956 31.5333 90.8156 32.12C89.5623 32.7067 88.0956 33 86.4156 33H71.8556ZM80.8156 28.2H85.7756C86.9223 28.2 87.8423 27.92 88.5356 27.36C89.2556 26.8 89.6156 26 89.6156 24.96V24.56C89.6156 23.52 89.269 22.72 88.5756 22.16C87.8823 21.6 86.949 21.32 85.7756 21.32H80.8156V28.2ZM80.8156 16.52H85.6956C86.789 16.52 87.6823 16.24 88.3756 15.68C89.0956 15.12 89.4556 14.3467 89.4556 13.36V12.96C89.4556 11.9467 89.109 11.1733 88.4156 10.64C87.7223 10.08 86.8156 9.8 85.6956 9.8H80.8156V16.52ZM105.538 33.56C104.125 33.56 102.858 33.32 101.738 32.84C100.618 32.3333 99.7248 31.6133 99.0581 30.68C98.4181 29.72 98.0981 28.56 98.0981 27.2C98.0981 25.84 98.4181 24.7067 99.0581 23.8C99.7248 22.8667 100.631 22.1733 101.778 21.72C102.951 21.24 104.285 21 105.778 21H111.218V19.88C111.218 18.9467 110.925 18.1867 110.338 17.6C109.751 16.9867 108.818 16.68 107.538 16.68C106.285 16.68 105.351 16.9733 104.738 17.56C104.125 18.12 103.725 18.8533 103.538 19.76L98.8981 18.2C99.2181 17.1867 99.7248 16.2667 100.418 15.44C101.138 14.5867 102.085 13.9067 103.258 13.4C104.458 12.8667 105.911 12.6 107.618 12.6C110.231 12.6 112.298 13.2533 113.818 14.56C115.338 15.8667 116.098 17.76 116.098 20.24V27.64C116.098 28.44 116.471 28.84 117.218 28.84H118.818V33H115.458C114.471 33 113.658 32.76 113.018 32.28C112.378 31.8 112.058 31.16 112.058 30.36V30.32H111.298C111.191 30.64 110.951 31.0667 110.578 31.6C110.205 32.1067 109.618 32.56 108.818 32.96C108.018 33.36 106.925 33.56 105.538 33.56ZM106.418 29.48C107.831 29.48 108.978 29.0933 109.858 28.32C110.765 27.52 111.218 26.4667 111.218 25.16V24.76H106.138C105.205 24.76 104.471 24.96 103.938 25.36C103.405 25.76 103.138 26.32 103.138 27.04C103.138 27.76 103.418 28.3467 103.978 28.8C104.538 29.2533 105.351 29.48 106.418 29.48ZM131.553 33.56C129.579 33.56 127.806 33.16 126.233 32.36C124.659 31.56 123.419 30.4 122.513 28.88C121.606 27.36 121.153 25.5333 121.153 23.4V22.76C121.153 20.6267 121.606 18.8 122.513 17.28C123.419 15.76 124.659 14.6 126.233 13.8C127.806 13 129.579 12.6 131.553 12.6C133.526 12.6 135.299 13 136.873 13.8C138.446 14.6 139.686 15.76 140.593 17.28C141.499 18.8 141.953 20.6267 141.953 22.76V23.4C141.953 25.5333 141.499 27.36 140.593 28.88C139.686 30.4 138.446 31.56 136.873 32.36C135.299 33.16 133.526 33.56 131.553 33.56ZM131.553 29.08C133.099 29.08 134.379 28.5867 135.393 27.6C136.406 26.5867 136.913 25.1467 136.913 23.28V22.88C136.913 21.0133 136.406 19.5867 135.393 18.6C134.406 17.5867 133.126 17.08 131.553 17.08C130.006 17.08 128.726 17.5867 127.713 18.6C126.699 19.5867 126.193 21.0133 126.193 22.88V23.28C126.193 25.1467 126.699 26.5867 127.713 27.6C128.726 28.5867 130.006 29.08 131.553 29.08Z" />
            </mask>
            <path
              d="M26.64 33V5H44.24V9.8H31.92V16.56H43.28V21.36H31.92V33H26.64ZM55.7272 33.32C54.1805 33.32 52.8205 32.9733 51.6472 32.28C50.5005 31.56 49.6072 30.5733 48.9672 29.32C48.3272 28.0667 48.0072 26.6267 48.0072 25V13.16H53.0472V24.6C53.0472 26.0933 53.4072 27.2133 54.1272 27.96C54.8739 28.7067 55.9272 29.08 57.2872 29.08C58.8339 29.08 60.0339 28.5733 60.8872 27.56C61.7405 26.52 62.1672 25.08 62.1672 23.24V13.16H67.2072V33H62.2472V30.4H61.5272C61.2072 31.0667 60.6072 31.72 59.7272 32.36C58.8472 33 57.5139 33.32 55.7272 33.32ZM71.8556 33V28.36H75.5356V9.64H71.8556V5H86.2556C87.9623 5 89.4423 5.29333 90.6956 5.88C91.9756 6.44 92.9623 7.25333 93.6556 8.32C94.3756 9.36 94.7356 10.6133 94.7356 12.08V12.48C94.7356 13.76 94.4956 14.8133 94.0156 15.64C93.5356 16.44 92.9623 17.0667 92.2956 17.52C91.6556 17.9467 91.0423 18.2533 90.4556 18.44V19.16C91.0423 19.32 91.6823 19.6267 92.3756 20.08C93.069 20.5067 93.6556 21.1333 94.1356 21.96C94.6423 22.7867 94.8956 23.8667 94.8956 25.2V25.6C94.8956 27.1467 94.5356 28.48 93.8156 29.6C93.0956 30.6933 92.0956 31.5333 90.8156 32.12C89.5623 32.7067 88.0956 33 86.4156 33H71.8556ZM80.8156 28.2H85.7756C86.9223 28.2 87.8423 27.92 88.5356 27.36C89.2556 26.8 89.6156 26 89.6156 24.96V24.56C89.6156 23.52 89.269 22.72 88.5756 22.16C87.8823 21.6 86.949 21.32 85.7756 21.32H80.8156V28.2ZM80.8156 16.52H85.6956C86.789 16.52 87.6823 16.24 88.3756 15.68C89.0956 15.12 89.4556 14.3467 89.4556 13.36V12.96C89.4556 11.9467 89.109 11.1733 88.4156 10.64C87.7223 10.08 86.8156 9.8 85.6956 9.8H80.8156V16.52ZM105.538 33.56C104.125 33.56 102.858 33.32 101.738 32.84C100.618 32.3333 99.7248 31.6133 99.0581 30.68C98.4181 29.72 98.0981 28.56 98.0981 27.2C98.0981 25.84 98.4181 24.7067 99.0581 23.8C99.7248 22.8667 100.631 22.1733 101.778 21.72C102.951 21.24 104.285 21 105.778 21H111.218V19.88C111.218 18.9467 110.925 18.1867 110.338 17.6C109.751 16.9867 108.818 16.68 107.538 16.68C106.285 16.68 105.351 16.9733 104.738 17.56C104.125 18.12 103.725 18.8533 103.538 19.76L98.8981 18.2C99.2181 17.1867 99.7248 16.2667 100.418 15.44C101.138 14.5867 102.085 13.9067 103.258 13.4C104.458 12.8667 105.911 12.6 107.618 12.6C110.231 12.6 112.298 13.2533 113.818 14.56C115.338 15.8667 116.098 17.76 116.098 20.24V27.64C116.098 28.44 116.471 28.84 117.218 28.84H118.818V33H115.458C114.471 33 113.658 32.76 113.018 32.28C112.378 31.8 112.058 31.16 112.058 30.36V30.32H111.298C111.191 30.64 110.951 31.0667 110.578 31.6C110.205 32.1067 109.618 32.56 108.818 32.96C108.018 33.36 106.925 33.56 105.538 33.56ZM106.418 29.48C107.831 29.48 108.978 29.0933 109.858 28.32C110.765 27.52 111.218 26.4667 111.218 25.16V24.76H106.138C105.205 24.76 104.471 24.96 103.938 25.36C103.405 25.76 103.138 26.32 103.138 27.04C103.138 27.76 103.418 28.3467 103.978 28.8C104.538 29.2533 105.351 29.48 106.418 29.48ZM131.553 33.56C129.579 33.56 127.806 33.16 126.233 32.36C124.659 31.56 123.419 30.4 122.513 28.88C121.606 27.36 121.153 25.5333 121.153 23.4V22.76C121.153 20.6267 121.606 18.8 122.513 17.28C123.419 15.76 124.659 14.6 126.233 13.8C127.806 13 129.579 12.6 131.553 12.6C133.526 12.6 135.299 13 136.873 13.8C138.446 14.6 139.686 15.76 140.593 17.28C141.499 18.8 141.953 20.6267 141.953 22.76V23.4C141.953 25.5333 141.499 27.36 140.593 28.88C139.686 30.4 138.446 31.56 136.873 32.36C135.299 33.16 133.526 33.56 131.553 33.56ZM131.553 29.08C133.099 29.08 134.379 28.5867 135.393 27.6C136.406 26.5867 136.913 25.1467 136.913 23.28V22.88C136.913 21.0133 136.406 19.5867 135.393 18.6C134.406 17.5867 133.126 17.08 131.553 17.08C130.006 17.08 128.726 17.5867 127.713 18.6C126.699 19.5867 126.193 21.0133 126.193 22.88V23.28C126.193 25.1467 126.699 26.5867 127.713 27.6C128.726 28.5867 130.006 29.08 131.553 29.08Z"
              fill="black"
              mask="url(#path-2-outside-1_24_602)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_24_602"
                x1="0"
                y1="19"
                x2="21"
                y2="19"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#00F0FF" />
                <stop offset="1" stop-color="#FF2ECC" />
              </linearGradient>
            </defs>
          </svg>
          <Heading as="h1" size={{ initial: "4", xs: "5" }} truncate>
            {setChain ? (
              <DropdownMenu.Root>
                <DropdownMenu.Trigger>{currentChainBadge}</DropdownMenu.Trigger>
                <DropdownMenu.Content>
                  <DropdownMenu.RadioGroup
                    onValueChange={(value) => {
                      setChain(value as "solana:${string}");
                    }}
                    value={chain}
                  >
                    <DropdownMenu.RadioItem value="solana:devnet">
                      Devnet
                    </DropdownMenu.RadioItem>
                  </DropdownMenu.RadioGroup>
                </DropdownMenu.Content>
              </DropdownMenu.Root>
            ) : (
              currentChainBadge
            )}
          </Heading>
        </Flex>

        <Flex gap="6" align="center">
          <Flex gap="5" display={{ initial: "none", md: "flex" }}>
            <Link
              to="/"
              style={{
                color: "var(--gray-12)",
                textDecoration: "none",
                fontWeight: 500,
              }}
            >
              Home
            </Link>
            <Link
              to="/deposit"
              style={{
                color: "var(--gray-12)",
                textDecoration: "none",
                fontWeight: 500,
              }}
            >
              Deposit
            </Link>
            <Link
              to="/mint"
              style={{
                color: "var(--gray-12)",
                textDecoration: "none",
                fontWeight: 500,
              }}
            >
              Mint
            </Link>
            <Link
              to="/earn"
              style={{
                color: "var(--gray-12)",
                textDecoration: "none",
                fontWeight: 500,
              }}
            >
              Earn
            </Link>
            <Link
              to="/dashboard"
              style={{
                color: "var(--gray-12)",
                textDecoration: "none",
                fontWeight: 500,
              }}
            >
              Dashboard
            </Link>
          </Flex>

          <Flex gap="2">
            <ConnectWalletMenu>Connect Wallet</ConnectWalletMenu>
            <SignInMenu>Sign In</SignInMenu>
          </Flex>
        </Flex>
      </Flex>
    </Box>
  );
}
